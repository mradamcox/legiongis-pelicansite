<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">

    <!-- Google Analytics Tracking -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-74344100-1', 'auto');
      ga('send', 'pageview');
    </script>
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    
    <script type="text/javascript" src="./theme/js/general.js"></script>
    
    <!-- all the hottest fonts from google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Exo+2:400,300,700,300italic,400italic,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lato:400,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Racing+Sans+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
    
    <!-- local css files -->
    <link rel="stylesheet" href="./theme/css/lamboz.css" media="all">
    <link rel="stylesheet" href="./theme/css/legiontheme.css" media="all">
    
    <!-- blue imp gallery currently locally hosted -->
    <link rel="stylesheet" href="./theme/plugins/Gallery-2.21.3/css/blueimp-gallery.min.css">
    
    <title>    Embedding Web Maps In These Blog Posts - Legion GIS, LLC
</title>
    <meta charset="utf-8" />
    <link href="http://legiongis.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Legion GIS, LLC Full Atom Feed" />
    <link href="http://legiongis.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Legion GIS, LLC Full RSS Feed" />
        
</head>
<body>
    <div class="container-fluid content">
        <div class="row">
            <div class="col-xs-12 col-flush">
                <div class="pages">
                    <ul style="text-align:center; margin-bottom:0 !important; padding:0px;">
                        <li class=""><a href="./index.html"><img src="https://s3-us-west-2.amazonaws.com/legiongis.com/img/whitelogo.png" style="width:225px"></img></a></li>
                        <li class=""><a href="./services.html">services</a></li>
                        <li class=""><a href="./background.html">background</a></li>
                        <li class=" active "><a href="./blog.html">blog</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-flush">
        <meta name="description" content="One thing I've been polishing up is a method for including a stock web map within the body of one of these blog posts ..." />
    <!--
    <div class="hp-header-inner"  style="height:100px;">
        <div class="page-header">
            <div class="content-header">
                <div id="title-block">
                    <p class="blurb"><em>Embedding Web Maps In These Blog Posts</em></p>
                <h1></h1>
                <h2></h2>
                </div>
            </div>
        </div>
    </div>
    -->
            </div>
        </div>
        <div class="row" style="padding-top:10px;">
            <div class="col-sm-12 col-md-8 col-md-offset-2">
<div class="col-xs-12">
    <div class="content-article">
        <p><a href="./blog.html"><em>&lsaquo; back to blog</em></a></p>
        <h2>Embedding Web Maps In These Blog Posts</h2>
        <header class="header-article">
            <h6 class="date-line">Posted on October 26, 2016, by Adam Cox</h6>
        </header>
        <section class="article">
            <div class="entry-content">
                <p>One thing I've been polishing up is a method for including a stock web map within the body of one of these blog posts. This would allow for a quick and easy way to share some news about current projects, along with the map layers that we're using or producing. I'd begun working on this a while ago, and have figured out a method that is 90% satisfactory.</p>
<p>This site is generated by Pelican, which means that an article (blog post) like this one is written in markdown and then passed through an html Jinja template, "article.html", which formats it and results in a static "embedding-web-maps-in-these-blog-posts.html" file. In a few cases I had made standalone web maps in new individual templates "map-article1.html", "map-article2.html", etc. However, these new templates would necessarily be exact copies of "article.html", plus a few added lines of html to make the map at the bottom. This kind of replication doesn't feel good.</p>
<p>One challenging thing about making a one-size-fits-all web map template is that even though the design can maintain a uniform look, labeling the buttons, info boxes, and configuring the layers themselves requires a considerable amount of modification from one map to the next. This means that a stock "map-article.html" template--to which a list of layers, layer information, button names, etc. could be passed--is out of the question, at least for now.</p>
<p>What I've ended up doing instead is a combination of standalone web map templates and the original "article.html" template. I created a new folder, "templates/maps", into which I've placed the html for each map. Then, I add that html file's name to the article's metadata. Finally, that html is incorporated into the "article.html" after the article's content is displayed with this statement:</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">article.content</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.maphtml</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="nv">article.maphtml</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>


<p>Including nice-looking maps at the bottom of blog posts is now pretty easy. I just have to go into the maps/templates folder, copy and paste an existing template, and add/remove buttons, layers, etc. This allows for a lot of flexibility with a relatively small amount of effort. The final touch is to copy these map templates staight to the website output, so the maps can be viewed on their own individual pages.</p>
<p>A note about the design itself: This web map format is just an adaptation of my very first foray into using Open Layers 3 and GeoServer. I have made some basic updates to make the maps (a little) more mobile friendly and to use this website's css, and rewritten the html to use bootstrap. Otherwise, as you can see, it's very simple.</p>
<p>Interested in more? Check out all of our <a href="tag/web-maps.html">other posts that have web maps</a>.</p>
<p>For more info on the example below, check out <a href="using-historic-maps-of-the-armed-forces-retirement-home.html">this post</a>.</p>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    
    <!-- OpenLayers JS -->
    <script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>
    <!-- OpenLayers CSS -->
    <link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">
    
    <!-- local css files -->
    <link rel="stylesheet" href="./theme/css/lamboz.css" media="all">
    <link rel="stylesheet" href="./theme/css/legiontheme.css" media="all">
    
    <!-- local CSS -->
    <link rel="stylesheet" href="./theme/css/overlay-map.css" type="text/css">
</head>
<body>
    <div class="container-fluid" style="background-color:#aaa; padding-left:0px; padding-right:0px; border:black solid 2px">
        <div class="row">
            <div class="col-xs-12">
                <div class="map-bar">
                    <ul id="bmlist" class="bar topbar">
                        <li class="rowhead toprow"><p><strong>BASEMAP</strong></p></li>
                        <li><button id="osm" class="layer wide bm" class="selected">open street map</button></li>
                        <li><button id="imagery" class="layer wide bm">aerial imagery</button></li>
                        <li><button id="blank" class="layer bm"><em>blank</em></button></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div class="map-bar">
                    <ul id="overlist" class="bar">
                        <li class="rowhead"><p><strong>OVERLAY</strong></p></li>
                        <li><button id="1850" class="layer hm">1850</button></li>
                        <li><button id="1865" class="layer hm">1865</button></li>
                        <li><button id="1866-67" class="layer hm">1866-67</button></li>
                        <li><button id="1873" class="layer hm">1873</button></li>
                        <li><button id="1877" class="layer hm">1877</button></li>
                        <li><button id="1892" class="layer hm">1892</button></li>
                        <li><button id="1903" class="layer hm">1903</button></li>
                        <li><button id="1914" class="layer hm">1914</button></li>
                        <li><button id="1944" class="layer hm">1944</button></li>
                        <li><button id="1953" class="layer hm">1953</button></li>
                        <li><button id="1967" class="layer hm">1967</button></li>
                        <li><button id="1975" class="layer hm">1975</button></li>
                        <li><button id="blank" class="layer hm"><em>none</em></button></li>
                        <li><button id="temp-remove" class="layer"><em>-/+</em></button></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div id="map" class="map"></div>
            </div>
            <div class="col-xs-12">
                <div class="info-box" id="layer-info" style="display:none"></div>
            </div>
            <div class="col-xs-12">
                <div class="info-box" id="accuracy-box" style="display:none">
                The process of placing historic maps on current maps ("georeferencing") is done by matching points on the historic map to corresponding points on a current basemap. It is not an exact process. In these examples, one will notice that the historical documents fit well in some places, and badly in others. Thus, historic maps are best considered as showing features in their current day <em>vicinity</em>, not exact location.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div id="footbar">
                    <button id="toggleinfo" class="lite">show overlay info</button><button id="togglenote" class="lite">show accuracy note</button>
                </div>
            </div>
        </div>
    </div>
    <script src="./theme/js/afrh_js.js" type="text/javascript"></script>
</body>                    <p><em></em></p>
                    <p><em><a href="./maps/afrh-historicmaps.html">view standalone map</a></em></p>
                <!--<p><a href="./maps/afrh-historicmaps.html"><em>view map in full screen</em></a></p>-->
            </div>
        </section>
        <footer class="footer-article">
            <hr class="hr-slight">
            <div class="tags-and-categories">Filed: <a href="./category/technical.html">technical</a>
            | Tagged: <a href="./tag/web-maps.html">web maps </a><a href="./tag/pelican.html">pelican </a><a href="./tag/jinja2.html">jinja2 </a>        </footer>
    </div>
</div>
            </div>
            <!--
            <div class="hidden-xs hidden-sm col-md-2">
                <h5>Shortcuts</h5>
                <ul class="links">
                    <li><a href="./pages/services/arches.html">Arches</a></li>
                    <li><a href="./pages/services/cartography.html">Cartography</a></li>
                    <li><a href="./pages/services/education.html">Education</a></li>
                    <li><a href="./pages/introduction-to-gis.html">Intro QGIS Class</a></li>
                    <li><a href="./csp/index.html">WCR Karst Survey</a></li>
                </ul>
                <h5>Our Tools</h5>
                <ul class="links">
                    <li><a href="http://qgis.org/">Quantum GIS</a></li>
                    <li><a href="http://esri.com/">ArcGIS</a></li>
                    <li><a href="http://archesproject.org/">Arches</a></li>
                    <li><a href="http://gimp.org">GIMP</a></li>
                    <li><a href="http://geoserver.org">GeoServer</a></li>
                    <li><a href="http://inkscape.org">Inkscape</a></li>
                    <li><a href="http://python.org/">Python</a></li>
                    <li><a href="https://aws.amazon.com/">Amazon Web Services</a></li>
                    <li><a href="http://getpelican.com/">Pelican</a></li>
                    <li><a href="https://www.mapbox.com/tilemill/">TileMill</a></li>
                </ul>
                <h5>Blog Feeds</h5>
                <ul class="links">
                    <li><a href="http://legiongis.com/feeds/all.atom.xml" rel="alternate">Atom</a></li>
                    <li><a href="http://legiongis.com/feeds/all.rss.xml" rel="alternate">RSS</a></li>
                </ul>
                
            </div>
            -->
        </div>
    </div>
    
    <div class="footer" style="text-align:center">
        <div class="container-fluid">
            <div class="row" style="padding:5px 0px;">
                <div class="col-sm-4">
                    <p>site updated Oct 31, 2016 (<a href="https://github.com/mradamcox/legiongis-pelicansite/commits/master">view commits</a>)</p>
                </div>
                <div class="col-sm-4">
                    <p><a id="email-address"></a> | 608-606-9928</p>
                </div>
                <div class="col-sm-4">
<p>powered by <a href="http://getpelican.com/">pelican</a>, <a href="https://github.com/mradamcox/legiongis-pelicansite-src">legiontheme</a> based on <a href="https://github.com/getpelican/pelican-themes/tree/master/bricks">bricks</a></p>                </div>
            </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        var c1 = "info";
        var c2 = "@";
        var c3 = "legiongis.com";
        var email = c1+c2+c3
        $(document).ready(function() {
            document.getElementById('email-address').textContent = email;
            document.getElementById('email-address').href = "mailto:"+email;
        });
    </script>
</body>
</html>